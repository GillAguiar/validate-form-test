<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <!-- VALIDAÇÃO DE FORMULARIO COM JS -->
        <div class="form" id="form">
            <h1>Formulário</h1>
            <div>
                <input type="text" class="inputs required" placeholder="Digite seu nome" oninput="nameValidate()">
                <span class="span-required">Nome deve ter no mínimo 3 caracteres.</span>
            </div>
            <div>
                <input type="text" class="inputs required" placeholder="Digite seu melhor email" oninput="emailValidate()">
                <span class="span-required">O email deve ser válido.</span>
            </div>
            <div>
                <input type="password" class="inputs required" placeholder="Digite sua senha" oninput="mainPasswordValidate()">
                <span class="span-required">A senha deve ter no mínimo 8 dígitos</span>
            </div>
            <div>
                <input type="password" class="inputs required" placeholder="Repita a senha" oninput="comparePasswords()">
                <span class="span-required">As senhas devem ser iguais</span>
            </div>
        </div>
    
    <script>
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        const form       = document.getElementById = ('form');
        const campos     = document.querySelectorAll('.required');
        const span       = document.querySelectorAll('.span-required');
       
        function setError(index){
            campos[index].style.border = '2px solid #red'
            span[index].style.display  = 'block';
        }

        function removeError(index){
            campos[index].style.border = ''
            span[index].style.display  = 'none'
        }

        function nameValidate() {
            if(campos[0].value.length < 3)
            {
                setError(0);
            } else
            {
                removeError(0);
            }
        }

        function emailValidate() {
            if(!emailRegex.test(campos[1].value))
            {
                setError(1)            
            } else
            {
                removeError(1)
            }
        }

        function mainPasswordValidate() {
            if(campos[2].value.length < 8)
            {
                setError(2)
            } else
            {
                removeError(2)
                comparePasswords()
            }
        }

        function comparePasswords(){
            if(campos[2].value == campos[3].value && campos[3].value.length <= 8)
            {
                removeError(3)
            } else
            {
                setError(3)
            }
        }

    </script>
</body>
</html>
